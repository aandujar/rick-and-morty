import{d as k,r as l,o as c,b as d,e as a,w as n,h as t,t as f,_ as B,i as b,T as M,g as C,x as N,F as S,k as V,q as y,j as z,p as R,u as F,y as P,l as j,s as D}from"./index-BC3BUcym.js";import{u as A}from"./episodeStore-vHZCbj2Q.js";import{u as U}from"./characterStore-Dm6ieK7r.js";import{C as q}from"./CharacterMini-x1-O5SdB.js";import{E as G,C as H}from"./routerInterfaces-HiXJPxee.js";import{e as x}from"./emitter-E5P-NQ8u.js";import"./http-common-BMdtxsgn.js";const L={class:"episode-complete__img"},O=["src"],J={class:"episode-complete__content"},K={class:"episode-complete__content__title mb-4"},Q={class:"episode-complete__content__title__item mr-2"},W={class:"episode-complete__content__title mb-4"},X={class:"episode-complete__content__title__item mr-2"},Y={class:"episode-complete__content__subtitle mb-4"},Z={class:"episode-complete__content__subtitle--big"},ee={class:"episode-complete__content__subtitle mb-4"},te={class:"episode-complete__content__subtitle--big"},oe=k({__name:"EpisodeComplete",props:{episodeModel:{}},emits:["goBack"],setup(g,{emit:o}){const _=o,e=g;function i(){_("goBack")}return(r,s)=>{const m=l("v-btn"),u=l("v-card");return c(),d("div",null,[a(u,{class:"episode-complete",hover:""},{default:n(()=>[t("div",L,[t("img",{class:"episode-complete__img__item",src:e.episodeModel.image},null,8,O)]),t("div",J,[t("div",K,[a(m,{icon:"mdi-arrow-left-thin",size:"medium",class:"mr-2",onClick:i}),t("div",Q,f(e.episodeModel.episode),1)]),t("div",W,[t("div",X,f(e.episodeModel.name),1)]),t("div",Y,[s[0]||(s[0]=t("span",{class:"episode-complete__content__subitle--small mr-1"},"Date:",-1)),t("div",Z,f(e.episodeModel.air_date),1)]),t("div",ee,[s[1]||(s[1]=t("span",{class:"episode-complete__content__subitle--small mr-1"},"Characters:",-1)),t("div",te,f(e.episodeModel.characters.length),1)])])]),_:1})])}}}),se=B(oe,[["__scopeId","data-v-ab0c3f48"]]),ae={class:"episode-characters__header"},ce={key:0,class:"episode-characters__content__text"},ie=k({__name:"EpisodeCharacters",props:{characters:{}},setup(g){const o=b(!1);function _(){o.value=!o.value}return(e,i)=>{const r=l("v-btn"),s=l("v-card");return c(),d("div",null,[a(s,{class:y(["episode-characters pa-4",{"episode-characters--opened":o.value,"episode-characters--closed":!o.value}]),hover:""},{default:n(()=>[t("div",ae,[i[0]||(i[0]=t("span",{class:"episode-characters__header__text"},"Characters",-1)),a(M,{name:"fade",mode:"out-in"},{default:n(()=>[o.value?(c(),C(r,{key:0,icon:"mdi-arrow-up",size:"medium",onClick:_})):(c(),C(r,{key:1,icon:"mdi-arrow-down",size:"medium",onClick:_}))]),_:1})]),t("div",{class:y(["episode-characters__content py-4",{"episode-characters__content--shown":o.value,"episode-characters__content--hidded":!o.value}])},[!e.characters||e.characters.length===0?(c(),d("div",ce," No characters ")):N("",!0),(c(!0),d(S,null,V(e.characters,(m,u)=>(c(),C(q,{key:u,character:m,class:"ma-4"},null,8,["character"]))),128))],2)]),_:1},8,["class"])])}}}),re=B(ie,[["__scopeId","data-v-5616ec2d"]]),ne={class:"episode-detail"},le={key:"loader",class:"episode-detail__loader pt-8 px-4"},de={key:"content",class:"episode-detail__content"},ge=k({__name:"EpisodeDetail",setup(g){const o=F(),_=P(),e=A(),i=U(),r=b(!0),s=b(!1);x.on("goCharacterDetail",T),z(m),R(()=>{e.setEpisode({}),i.setCharactersDetail([]),x.off("goCharacterDetail")});function m(){r.value=!0,e.getEpisodeById(Number(_.params.episodeId)).then(u).catch(()=>{s.value=!0,setTimeout(h,2e3)})}function u(){if(e.episodeDetail.characters.length>1){const v=e.episodeDetail.characters.map(p=>p.split("/character/")[1]).join(",");i.getCharactersById(v).catch(()=>{s.value=!0,setTimeout(h,2e3)}).finally(()=>setTimeout(()=>r.value=!1,2e3))}else i.getCharacterByIdForDetail(Number(e.episodeDetail.characters[0].split("/character/")[1])).catch(()=>{s.value=!0,setTimeout(h,2e3)}).finally(()=>setTimeout(()=>r.value=!1,2e3))}function h(){o.push(G)}function T(v){o.push(`${H}/${v}`)}return(v,p)=>{const w=l("v-snackbar"),$=l("v-skeleton-loader"),E=l("v-col");return c(),d("div",ne,[a(w,{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=I=>s.value=I),timeout:5e3,location:"top",color:"red",height:"100px"},{default:n(()=>p[1]||(p[1]=[j(" No episode found ")])),_:1},8,["modelValue"]),a(M,{name:"fade",mode:"out-in"},{default:n(()=>[r.value?(c(),d("div",le,[a($,{height:"400px",width:"80%",type:"card"})])):(c(),d("div",de,[a(E,{cols:"12",xs:"12"},{default:n(()=>[a(se,{episodeModel:D(e).episodeDetail,onGoBack:h},null,8,["episodeModel"])]),_:1}),a(E,{cols:"12",xs:"12"},{default:n(()=>[a(re,{characters:D(i).charactersDetail},null,8,["characters"])]),_:1})]))]),_:1})])}}});export{ge as default};
