import{d as C,r as d,o as c,b as p,e as a,w as n,h as e,t as l,_ as M,i as k,a as N,f as V,g,T as $,x as z,F as R,k as F,q as D,j as P,p as x,u as j,y as A,l as G,s as T}from"./index-BC3BUcym.js";import{u as L}from"./characterStore-Dm6ieK7r.js";import{E as O,u as U}from"./episodeStore-vHZCbj2Q.js";import{C as q}from"./CharacterStatus-BxL6g03I.js";import{e as E}from"./emitter-E5P-NQ8u.js";import{C as H,E as J}from"./routerInterfaces-HiXJPxee.js";import"./http-common-BMdtxsgn.js";const K={class:"character-complete__img"},Q=["src"],W={class:"character-complete__content"},X={class:"character-complete__content__title"},Y={class:"character-complete__content__title__item mr-2"},Z={class:"character-complete__content__block"},ee={class:"character-complete__content__block__subtitle"},te={class:"character-complete__content__block__subtitle--big"},se={class:"character-complete__content__block__subtitle"},oe={class:"character-complete__content__block__subtitle--big"},ae={class:"character-complete__content__block__subtitle"},ce={class:"character-complete__content__block__subtitle--big"},re={class:"character-complete__content__block"},ie={class:"character-complete__content__block__subtitle"},_e={class:"character-complete__content__block__subtitle--big"},le={class:"character-complete__content__block__subtitle"},ne={class:"character-complete__content__block__subtitle--big"},de={class:"character-complete__content__block__subtitle"},pe={class:"character-complete__content__block__subtitle--big"},me=C({__name:"CharacterComplete",props:{characterModel:{}},emits:["goBack"],setup(h,{emit:o}){const r=o,t=h;function i(){r("goBack")}return(_,s)=>{const m=d("v-btn"),v=d("v-card");return c(),p("div",null,[a(v,{class:"character-complete",hover:""},{default:n(()=>[e("div",K,[e("img",{class:"character-complete__img__item",src:t.characterModel.image},null,8,Q)]),e("div",W,[e("div",X,[a(m,{icon:"mdi-arrow-left-thin",size:"medium",class:"mr-2",onClick:i}),e("div",Y,l(t.characterModel.name),1),a(q,{class:"pt-4",status:t.characterModel.status,style:{"margin-bottom":"10px"}},null,8,["status"])]),e("div",Z,[e("div",ee,[s[0]||(s[0]=e("span",{class:"character-complete__content__block__subitle--small mr-1"},"Specie:",-1)),e("div",te,l(t.characterModel.species),1)]),e("div",se,[s[1]||(s[1]=e("span",{class:"character-complete__content__block__subitle--small mr-1"},"Gender:",-1)),e("div",oe,l(t.characterModel.gender),1)]),e("div",ae,[s[2]||(s[2]=e("span",{class:"character-complete__content__block__subitle--small mr-1"},"Type:",-1)),e("div",ce,l(t.characterModel.type),1)])]),e("div",re,[e("div",ie,[s[3]||(s[3]=e("span",{class:"character-complete__content__block__subitle--small mr-1"},"Origin:",-1)),e("div",_e,l(t.characterModel.origin),1)]),e("div",le,[s[4]||(s[4]=e("span",{class:"character-complete__content__block__subitle--small mr-1"},"Last seen on:",-1)),e("div",ne,l(t.characterModel.location),1)]),e("div",de,[s[5]||(s[5]=e("span",{class:"character-complete__content__block__subitle--small mr-1"},"Episodes:",-1)),e("div",pe,l(t.characterModel.episode.length),1)])])])]),_:1})])}}}),ue=M(me,[["__scopeId","data-v-e15e8afb"]]),he={class:"episode-mini__image"},ve=["src"],be={class:"episode-mini__text pa-2"},fe=C({__name:"EpisodeMini",props:{episodeModel:{}},setup(h){const o=h,r=k(new O(o.episodeModel.id,o.episodeModel.name,o.episodeModel.air_date,o.episodeModel.episode,o.episodeModel.characters));function t(){E.emit("goEpisodeDetail",r.value.id)}return(i,_)=>{const s=d("v-card"),m=N("ripple");return c(),p("div",null,[V((c(),g(s,{hover:"",class:"episode-mini",onClick:t},{default:n(()=>[e("div",he,[e("img",{class:"episode-mini__image__item",src:r.value.image},null,8,ve)]),e("div",be,l(r.value.episode),1)]),_:1})),[[m]])])}}}),ge=M(fe,[["__scopeId","data-v-0682c489"]]),ke={class:"character-episodes__header"},Ce={key:0,class:"character-episodes__content__text"},Ee=C({__name:"CharacterEpisodes",props:{episodes:{}},setup(h){const o=k(!1);function r(){o.value=!o.value}return(t,i)=>{const _=d("v-btn"),s=d("v-card");return c(),p("div",null,[a(s,{class:D(["character-episodes pa-4",{"character-episodes--opened":o.value,"character-episodes--closed":!o.value}]),hover:""},{default:n(()=>[e("div",ke,[i[0]||(i[0]=e("span",{class:"character-episodes__header__text"},"Episodes",-1)),a($,{name:"fade",mode:"out-in"},{default:n(()=>[o.value?(c(),g(_,{key:0,icon:"mdi-arrow-up",size:"medium",onClick:r})):(c(),g(_,{key:1,icon:"mdi-arrow-down",size:"medium",onClick:r}))]),_:1})]),e("div",{class:D(["character-episodes__content py-4",{"character-episodes__content--shown":o.value,"character-episodes__content--hidded":!o.value}])},[!t.episodes||t.episodes.length===0?(c(),p("div",Ce," No episodes ")):z("",!0),(c(!0),p(R,null,F(t.episodes,(m,v)=>(c(),g(ge,{key:v,episodeModel:m,class:"ma-4"},null,8,["episodeModel"]))),128))],2)]),_:1},8,["class"])])}}}),Me=M(Ee,[["__scopeId","data-v-358316d3"]]),ye={class:"character-detail"},De={key:"loader",class:"character-detail__loader pt-8 px-4"},xe={key:"content",class:"character-detail__content"},Ve=C({__name:"CharacterDetail",setup(h){const o=j(),r=A(),t=L(),i=U(),_=k(!0),s=k(!1);E.on("goEpisodeDetail",B),P(m),x(()=>t.setCharacter({})),x(()=>{t.setCharacter({}),i.setEpisodesDetail([]),E.off("goEpisodeDetail")});function m(){_.value=!0,t.getCharacterById(Number(r.params.characterId)).then(v).catch(()=>{s.value=!0,setTimeout(b,2e3)}).finally(()=>setTimeout(()=>_.value=!1,2e3))}function v(){if(t.characterDetail.episode.length>1){const f=t.characterDetail.episode.map(u=>u.split("/episode/")[1]).join(",");i.getEpisodesById(f).catch(()=>{s.value=!0,setTimeout(b,2e3)}).finally(()=>setTimeout(()=>_.value=!1,2e3))}else i.getEpisodeByIdForDetail(Number(t.characterDetail.episode[0].split("/episode/")[1])).catch(()=>{s.value=!0,setTimeout(b,2e3)}).finally(()=>setTimeout(()=>_.value=!1,2e3))}function b(){o.push(H)}function B(f){o.push(`${J}/${f}`)}return(f,u)=>{const w=d("v-snackbar"),S=d("v-skeleton-loader"),y=d("v-col");return c(),p("div",ye,[a(w,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=I=>s.value=I),timeout:5e3,location:"top",color:"red",height:"100px"},{default:n(()=>u[1]||(u[1]=[G(" No character found ")])),_:1},8,["modelValue"]),a($,{name:"fade",mode:"out-in"},{default:n(()=>[_.value?(c(),p("div",De,[a(S,{height:"400px",width:"80%",type:"card"})])):(c(),p("div",xe,[a(y,{cols:"12",xs:"12"},{default:n(()=>[a(ue,{characterModel:T(t).characterDetail,onGoBack:b},null,8,["characterModel"])]),_:1}),a(y,{cols:"12",xs:"12"},{default:n(()=>[a(Me,{episodes:T(i).episodesDetail},null,8,["episodes"])]),_:1})]))]),_:1})])}}});export{Ve as default};
