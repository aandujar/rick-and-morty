import{d as k,r,o as n,b as _,e as s,w as i,h as t,t as f,_ as B,i as b,T as M,g as C,x as S,F as V,k as z,q as L,j as R,p as D,u as A,y as E,l as F,s as T}from"./index-BC3BUcym.js";import{u as j}from"./characterStore-Dm6ieK7r.js";import{u as O}from"./locationStore-Di4L5ck_.js";import{C as P}from"./CharacterMini-x1-O5SdB.js";import{L as U,C as q}from"./routerInterfaces-HiXJPxee.js";import{e as x}from"./emitter-E5P-NQ8u.js";import"./http-common-BMdtxsgn.js";const G={class:"location-complete__img"},H=["src"],J={class:"location-complete__content"},K={class:"location-complete__content__title mb-4"},Q={class:"location-complete__content__title__item mr-2"},W={class:"location-complete__content__subtitle mb-4"},X={class:"location-complete__content__subtitle--big"},Y={class:"location-complete__content__subtitle mb-4"},Z={class:"location-complete__content__subtitle--big"},tt={class:"location-complete__content__subtitle mb-4"},et={class:"location-complete__content__subtitle--big"},ot=k({__name:"LocationComplete",props:{locationModel:{}},emits:["goBack"],setup(g,{emit:a}){const d=a,e=g;function c(){d("goBack")}return(l,o)=>{const u=r("v-btn"),p=r("v-card");return n(),_("div",null,[s(p,{class:"location-complete",hover:""},{default:i(()=>[t("div",G,[t("img",{class:"location-complete__img__item",src:e.locationModel.image},null,8,H)]),t("div",J,[t("div",K,[s(u,{icon:"mdi-arrow-left-thin",size:"medium",class:"mr-2",onClick:c}),t("div",Q,f(e.locationModel.name),1)]),t("div",W,[o[0]||(o[0]=t("span",{class:"location-complete__content__subitle--small mr-1"},"Type:",-1)),t("div",X,f(e.locationModel.type),1)]),t("div",Y,[o[1]||(o[1]=t("span",{class:"location-complete__content__subitle--small mr-1"},"Dimension:",-1)),t("div",Z,f(e.locationModel.dimension),1)]),t("div",tt,[o[2]||(o[2]=t("span",{class:"location-complete__content__subitle--small mr-1"},"Characters:",-1)),t("div",et,f(e.locationModel.residents.length),1)])])]),_:1})])}}}),at=B(ot,[["__scopeId","data-v-7cd3515a"]]),ct={class:"location-characters__header"},st={key:0,class:"location-characters__content__text"},nt=k({__name:"LocationCharacters",props:{characters:{}},setup(g){const a=b(!1);function d(){a.value=!a.value}return(e,c)=>{const l=r("v-btn"),o=r("v-card");return n(),_("div",null,[s(o,{class:L(["location-characters pa-4",{"location-characters--opened":a.value,"location-characters--closed":!a.value}]),hover:""},{default:i(()=>[t("div",ct,[c[0]||(c[0]=t("span",{class:"location-characters__header__text"},"Characters",-1)),s(M,{name:"fade",mode:"out-in"},{default:i(()=>[a.value?(n(),C(l,{key:0,icon:"mdi-arrow-up",size:"medium",onClick:d})):(n(),C(l,{key:1,icon:"mdi-arrow-down",size:"medium",onClick:d}))]),_:1})]),t("div",{class:L(["location-characters__content py-4",{"location-characters__content--shown":a.value,"location-characters__content--hidded":!a.value}])},[!e.characters||e.characters.length===0?(n(),_("div",st," No characters ")):S("",!0),(n(!0),_(V,null,z(e.characters,(u,p)=>(n(),C(P,{key:p,character:u,class:"ma-4"},null,8,["character"]))),128))],2)]),_:1},8,["class"])])}}}),lt=B(nt,[["__scopeId","data-v-64aedb85"]]),it={class:"location-detail"},rt={key:"loader",class:"location-detail__loader pt-8 px-4"},_t={key:"content",class:"location-detail__content"},gt=k({__name:"LocationDetail",setup(g){const a=A(),d=E(),e=j(),c=O(),l=b(!0),o=b(!1);x.on("goCharacterDetail",w),R(u),D(()=>c.setLocation({})),D(()=>{c.setLocation({}),e.setCharactersDetail([]),x.off("goCharacterDetail")});function u(){l.value=!0,c.getLocationById(Number(d.params.locationId)).then(p).catch(()=>{o.value=!0,setTimeout(h,2e3)}).finally(()=>setTimeout(()=>l.value=!1,2e3))}function p(){if(c.locationDetail.residents.length>0){const v=c.locationDetail.residents.map(m=>m.split("/character/")[1]).join(",");e.getCharactersById(v).catch(()=>{o.value=!0,setTimeout(h,2e3)}).finally(()=>setTimeout(()=>l.value=!1,2e3))}else e.getCharacterByIdForDetail(Number(c.locationDetail.residents[0].split("/character/")[1])).catch(()=>{o.value=!0,setTimeout(h,2e3)}).finally(()=>setTimeout(()=>l.value=!1,2e3))}function h(){a.push(U)}function w(v){a.push(`${q}/${v}`)}return(v,m)=>{const N=r("v-snackbar"),$=r("v-skeleton-loader"),y=r("v-col");return n(),_("div",it,[s(N,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=I=>o.value=I),timeout:5e3,location:"top",color:"red",height:"100px"},{default:i(()=>m[1]||(m[1]=[F(" No location found ")])),_:1},8,["modelValue"]),s(M,{name:"fade",mode:"out-in"},{default:i(()=>[l.value?(n(),_("div",rt,[s($,{height:"400px",width:"80%",type:"card"})])):(n(),_("div",_t,[s(y,{cols:"12",xs:"12"},{default:i(()=>[s(at,{locationModel:T(c).locationDetail,onGoBack:h},null,8,["locationModel"])]),_:1}),s(y,{cols:"12",xs:"12"},{default:i(()=>[s(lt,{characters:T(e).charactersDetail},null,8,["characters"])]),_:1})]))]),_:1})])}}});export{gt as default};
